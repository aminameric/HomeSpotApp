<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Property Single - EstateAgency Bootstrap Template</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Prefetch Important Resources -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" href="assets/css/main.css" as="style">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700&family=Poppins:wght@100;300;400;500;700&display=swap" rel="stylesheet">
  
  <style>
    .modal {
      display: none; /* Hidden by default */
      position: fixed; /* Stay in place */
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      z-index: 1000; /* Ensure it's above everything else */
      background-color: rgba(0,0,0,0.5); /* Black background with transparency */
      justify-content: center;
      align-items: center;
      transition: opacity 0.3s ease-in-out; /* Smooth transition */
    }

    .modal.show {
      display: flex; /* Show the modal and use flexbox for centering */
      opacity: 1; /* Full opacity */
    }

    .modal-content {
      background-color: white;
      padding: 20px;
      border-radius: 5px;
      max-width: 500px;
      width: 100%;
      text-align: center;
      z-index: 1001; /* Ensure it's above the background */
      position: relative;
    }

    .close {
      position: absolute;
      top: 10px;
      right: 15px;
      color: #aaa;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }

    .close:hover,
    .close:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }


    .button-container {
      text-align: center; /* Center the buttons */
      margin-top: 20px;   /* Add spacing between the picture and buttons */
  }

  /* Custom button styles for all buttons */
  .btn-custom {
      background-color: #6c757d; /* Gray background */
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      transition: background-color 0.3s ease;
      display: inline-block; /* Ensure the buttons are inline for correct centering */
      margin: 5px;           /* Add spacing between buttons */
  }

  .btn-custom:hover {
      background-color: #28a745; /* Green hover effect */
      color: white;
  }

  #deletePropertyBtn {
      background-color: #c82333; /* Slightly darker red on hover */
      color: white;
  }

    .modal-footer {
  display: flex;
  justify-content: center;
  gap: 15px; /* Adds space between Yes and No buttons */
  padding-top: 20px;
}

/* Additional styling for text alignment, spacing, and form fields */

.modal-content h3 {
    margin-bottom: 20px; /* Add space below the title */
    font-size: 24px; /* Larger font size for the modal title */
    text-align: center;
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    font-weight: bold;
    margin-bottom: 5px;
    color: #333;
}

.form-control {
    width: 100%;
    padding: 10px;
    border-radius: 5px;
    border: 1px solid #ccc;
    font-size: 16px;
}

.textarea {
    min-height: 100px;
}

/* Modal Footer */
.modal-footer button {
    padding: 10px 20px;
    font-size: 16px;
    border-radius: 5px;
    border: none;
}

.btn-secondary {
    background-color: #6c757d;
    color: white;
    transition: background-color 0.3s;
}

.btn-secondary:hover {
    background-color: #5a6268;
}

.btn-primary {
    background-color: #28a745;
    color: white;
    transition: background-color 0.3s;
}

.btn-primary:hover {
    background-color: #218838;
}


</style>
</head>

<body class="property-single-page">

  <main class="main">
    <!-- Page Title -->
    <div class="page-title" data-aos="fade">
      <div class="heading">
        <div class="container">
          <div class="row d-flex justify-content-center text-center">
            <div class="col-lg-8">
              <h1>Property Single</h1>
              <p class="mb-0">Specific information about the property: </p>
            </div>
          </div>
        </div>
      </div>
      <nav class="breadcrumbs">
        <div class="container">
          <ol>
            <li><a href="#index">Home</a></li>
            <li class="current">Property Single</li>
          </ol>
        </div>
      </nav>
    </div><!-- End Page Title -->

    <!-- Real Estate 2 Section -->
    <section id="real-estate-2" class="real-estate-2 section">
      <div class="container" data-aos="fade-up">
        <div class="portfolio-details-slider swiper init-swiper">
          <div class="row justify-content-between gy-4 mt-4">
            <div class="col-lg-8" data-aos="fade-up">
              <div class="portfolio-description">
                <h2>Name: <span id="property-name"></span></h2>
                <div class="testimonial-item">
                  <p>
                    <span id="property-info">We are here to</span>
                  </p>
                  <div>
                    <img id="agent-image" src="assets/img/testimonials/testimonials-2.jpg" class="testimonial-img" alt="">
                    <h3><span id="agent-name"></span></h3>
                    <h4>Agent</h4>
                  </div>
                </div>
              </div><!-- End Portfolio Description -->

              <!-- Tabs -->
              <ul class="nav nav-pills mb-3">
                <li><a class="nav-link active" data-bs-toggle="pill" href="#real-estate-2-tab1">Photo</a></li>
                <li><a class="nav-link" data-bs-toggle="pill" href="#real-estate-2-tab2">Floor Plan</a></li>
              </ul><!-- End Tabs -->

              <!-- Tab Content -->
              <div class="tab-content">
                <div class="tab-pane fade show active" id="real-estate-2-tab1">
                  <img id="real-estate-image" src="default.jpg" alt="Property Image">
                </div><!-- End Tab 1 Content -->

                <div class="tab-pane fade" id="real-estate-2-tab2">
                  <img src="assets/img/floor-plan.jpg" alt="" class="img-fluid" id="floor-image">
                </div><!-- End Tab 2 Content -->
              </div><!-- End Tab Content -->

              <!-- Button to open modal -->
              <div class="button-container">
                <!-- Button to open edit modal -->
                <button type="button" class="btn btn-primary btn-custom d-none" id="openModal">Edit Property</button>
                <!-- Button to open delete confirmation modal -->
                <button type="button" class="btn btn-danger btn-custom d-none" id="deletePropertyBtn">Delete Property</button>

                <!-- Reserve button -->
                <button type="button" class="btn btn-secondary btn-custom d-none" id="reserveBtn">Reserve</button>

                <!-- Buy button -->
                <button type="button" class="btn btn-secondary btn-custom d-none" id="buyBtn">Buy</button>
              </div>

<!--edit modal-->
              <!-- Modal Structure -->
<div id="myModal" class="modal">
  <div class="modal-content">
      <span class="close">&times;</span>
      <h3>Edit Property Details</h3>
      <form id="edit-property-form">
          <div class="form-group">
              <label for="property-name">Property Name</label>
              <input type="text" class="form-control" id="property-name" placeholder="Enter property name">
          </div>
          <div class="form-group">
              <label for="property-description">Property Description</label>
              <textarea class="form-control" id="property-description" rows="3" placeholder="Enter property description"></textarea>
          </div>
          <div class="form-group">
              <label for="property-price">Property Price</label>
              <input type="number" class="form-control" id="property-price" placeholder="Enter property price">
          </div>
      </form>
      <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="cancel-btn">Cancel</button>
          <button type="button" class="btn btn-primary" id="save-property-btn">Save changes</button>
      </div>
  </div>
</div>


<!-- Delete Confirmation Modal Structure -->
                <div id="deleteModal" class="modal">
                  <div class="modal-content">
                    <span class="close">&times;</span>
                    <h3>Confirm Delete</h3>
                    <p>Are you sure you want to delete this property?</p>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" id="cancel-delete-btn">No</button>
                      <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Yes</button>
                    </div>
                  </div>
                </div>

<!--reserve modal-->
<div id="myReservartionModal" class="modal">
  <div class="modal-content">
    <!-- Close button in the top-right corner -->
    <span class="close">&times;</span>
    <h3>Reserve Property</h3>
    
    <form id="reserve-property-form">
      <div class="form-group">
        <label class="label">Reservation Date</label>
        <input class="input" type="date" id="reservation-date" required>
      </div>
      <div class="form-group">
        <label class="label">Additional Comments</label>
        <textarea class="textarea" id="reservation-comments" placeholder="Enter any additional comments"></textarea>
      </div>
    </form>
    
    <div class="modal-footer">
      <!-- Cancel/Close button -->
      <button type="button" class="btn btn-secondary" id="cancel-btn">Cancel</button>
      <!-- Save changes button -->
      <button type="button" class="btn btn-primary" id="save-property-btn">Save changes</button>
    </div>
  </div>
</div>

            </div>
            <div class="col-lg-3" data-aos="fade-up" data-aos-delay="100">
              <div class="portfolio-info">
                <h3>Quick Summary</h3>
                <ul>
                  <li><strong>Price:</strong> $50 000</li>
                  <li><strong>Bedrooms:</strong> 4</li>
                  <li><strong>Bathrooms:</strong> 1</li>
                  <li><strong>Area:</strong> <span>340m2</span></li>
                  <li><strong>Street Address:</strong> Stupska 19</li>
                  <li><strong>City:</strong> Sarajevo </li>
                  <li><strong>Country:</strong> Bosnia and Herzegovina </li>
                  <li><strong>Property Type:</strong> House</li>
                  <li><strong>Postal Code:</strong> 71000</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section><!-- /Real Estate 2 Section -->

  </main>

  <!-- Bootstrap and jQuery (ensure these are loaded properly) -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="assets/js/singleproperty.js"></script>

  <!-- Custom Script to control modal -->
  <script>
    window.onload = function () {
        console.log('Script for button control is running');
  
        // Check if user exists in localStorage
        const rawUser = localStorage.getItem('user');
        if (!rawUser) {
            console.error('No user data found in localStorage');
            return;
        }
  
        let user = null;
  
        try {
            // Parse the user data
            user = JSON.parse(rawUser);
  
            // Check if user object contains 'type_of_user'
            if (!user.type_of_user) {
                console.error('User does not have type_of_user property');
                return;
            }
  
            const type_of_user = user.type_of_user;
            console.log('type_of_user:', type_of_user);
  
            // Buttons for Agent role
            if (type_of_user === 'Agent') {
                document.getElementById('deletePropertyBtn').classList.remove('d-none');
                document.getElementById('openModal').classList.remove('d-none');

                // Also hide the Reserve and Buy buttons for the Agent
                document.getElementById('reserveBtn').classList.add('d-none');
                document.getElementById('buyBtn').classList.add('d-none');
  
                // Attach event listeners to the Edit and Delete buttons after making them visible
                attachEventListeners();
  
            } else {
                // Hide the buttons if not Agent
                document.getElementById('deletePropertyBtn').classList.add('d-none');
                document.getElementById('openModal').classList.add('d-none');
  
                // Show Reserve and Buy buttons for non-Agent users
                document.getElementById('reserveBtn').classList.remove('d-none');
                document.getElementById('buyBtn').classList.remove('d-none');
            }
        } catch (error) {
            console.error('Error parsing user data from localStorage:', error);
        }
    };

    // Function to attach event listeners for edit and delete buttons
    function attachEventListeners() {
        const editModal = document.getElementById('myModal');
        const editPropertyBtn = document.getElementById('openModal');
        const cancelEditBtn = document.getElementById('cancel-btn');

        const deleteModal = document.getElementById('deleteModal');
        const deletePropertyBtn = document.getElementById('deletePropertyBtn');
        const cancelDeleteBtn = document.getElementById('cancel-delete-btn');
        const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');

        // Close buttons for both modals (Edit and Delete)
        const closeBtns = document.querySelectorAll('.close');

        // Open the Edit Property modal
        if (editPropertyBtn) {
            editPropertyBtn.addEventListener('click', function () {
                editModal.classList.add('show'); // Show the Edit modal
            });
        }

        // Open the Delete Confirmation modal
        if (deletePropertyBtn) {
            deletePropertyBtn.addEventListener('click', function () {
                deleteModal.classList.add('show'); // Show the Delete modal
            });
        }

        // Close the modals when clicking the X button (for both modals)
        closeBtns.forEach(function (btn) {
            btn.addEventListener('click', function () {
                editModal.classList.remove('show'); // Hide the Edit modal
                deleteModal.classList.remove('show'); // Hide the Delete modal
            });
        });

        // Close the Edit modal if the user clicks 'Cancel'
        if (cancelEditBtn) {
            cancelEditBtn.addEventListener('click', function () {
                editModal.classList.remove('show');
            });
        }

        // Close the Delete modal if the user clicks 'No' (Cancel Delete)
        if (cancelDeleteBtn) {
            cancelDeleteBtn.addEventListener('click', function () {
                deleteModal.classList.remove('show');
            });
        }

        // Handle the Delete confirmation ('Yes' button clicked)
        if (confirmDeleteBtn) {
            confirmDeleteBtn.addEventListener('click', function () {
                // You can define a function to handle property deletion
                deleteProperty(); // Call your delete function (you need to define this)
                deleteModal.classList.remove('show'); // Hide the modal
            });
        }

        // Close any modal if the user clicks outside of the modal content
        window.addEventListener('click', function (event) {
            if (event.target == editModal) {
                editModal.classList.remove('show');
            } else if (event.target == deleteModal) {
                deleteModal.classList.remove('show');
            }
        });
    }
</script>



</body>

</html>
